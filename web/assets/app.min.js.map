{"version":3,"sources":["app/app.js","node_modules/auto-reload-brunch/vendor/auto-reload.js"],"names":["$","geocachesRetrieved","fetchUnpublishedGeocaches","button","fetch","mode","credentials","then","json","filterData","displayGeocaches","catch","err","text","console","error","errorMessage","click","document","getElementById","value","method","headers","body","JSON","stringify","response","ok","status","window","location","replace","href","data","each","geocaches","index","g","Object","keys","find","key","referenceCode","undefined","push","prop","hide","show","html","forEach","append","geocacheType","imageUrl","name","url","length","is","on","countFrom","parseInt","parents","countTo","val","change","geocodes","create","alert","removeClass","gpxSplit","ajax","type","done","success","link","message","fail","jqXHR","textStatus","always","ready","user","WebSocket","MozWebSocket","br","brunch","ar","disabled","_ar","cacheBuster","date","Math","round","Date","now","toString","indexOf","browser","navigator","userAgent","toLowerCase","forceRepaint","reloaders","page","reload","stylesheet","slice","call","querySelectorAll","filter","getAttribute","setTimeout","offsetHeight","javascript","scripts","textScripts","map","script","srcScripts","src","loaded","all","onLoad","eval","remove","newScript","createElement","async","onload","head","appendChild","port","host","server","hostname","connect","connection","onmessage","event","reloader","onerror","readyState","close","onclose"],"mappings":"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","file":"web/assets/app.min.js","sourcesContent":["(function ($) {\n  \"use strict\";\n\n  let geocachesRetrieved = [];\n\n  let fetchUnpublishedGeocaches = function () {\n    $(\"#create-gpx\").button(\"reset\");\n\n    fetch(\"unpublished.php\", {\n      mode: \"same-origin\",\n      credentials: \"same-origin\"\n    })\n    .then(json)\n    .then(filterData)\n    .then(displayGeocaches)\n    .catch(err => {\n      err.text().then( errorMessage => {\n        console.error(errorMessage);\n      });\n    });\n  };\n\n  $(\"#search-geocodes\").click(function () {\n    if (document.getElementById(\"geocodes\").value === \"\") {\n      return false;\n    }\n\n    fetch(\"unpublished.php\", {\n      method: \"POST\",\n      mode: \"same-origin\",\n      credentials: \"same-origin\",\n      headers: {\n        \"Content-Type\": \"application/json\"\n      },\n      body: JSON.stringify({\n        \"geocodes\":  document.getElementById(\"geocodes\").value\n      })\n    })\n    .then(json)\n    .then(filterData)\n    .then(displayGeocaches)\n    .catch(err => {\n      err.text().then( errorMessage => {\n        console.error(errorMessage);\n      });\n    });\n  \n  });\n\n  let json = function(response) {\n    if(!response.ok) {\n      if (response.status === 403) {\n        window.location.replace(window.location.href + \"?logout\");\n      }\n      throw response;\n    }\n    return response.json();\n  };\n\n  let filterData = function(data) {\n    $.each(data.geocaches, function(index, g) {\n      if (Object.keys(geocachesRetrieved).find(key => geocachesRetrieved[key].referenceCode === g.referenceCode) === undefined) {\n        geocachesRetrieved.push(g);\n      }\n    });\n  };\n\n  let displayGeocaches = function () {\n    $(\"#select-all\").prop(\"checked\", false);\n    $(\"#fetching-unpublished-caches\").hide();\n    $(\"#table-unpublished-caches\").show();\n    $(\"#table-caches tbody\").html(\"\");\n\n    geocachesRetrieved.forEach(function(g, index) {\n        $(\"#table-caches tbody\")\n            .append(`\n            <tr class=\"${g.referenceCode}\" data-counter=\" ${index+1}\" title=\"Add this geocache to the GPX\">\n                    <td style=\"text-align: center;\"><input type=\"checkbox\" name=\"cache\" class=\"unpublished-geocache\" value=\"${g.referenceCode }\" id=\"${g.referenceCode}\" /></td>\n                    <td>#${index+1}</td>\n                    <td>${g.referenceCode}</td>\n                    <td><label for=\"${g.referenceCode}\"><img src=\"${g.geocacheType.imageUrl}\" alt=\"${g.geocacheType.name}\" width=\"24\" /> ${g.name}</label></td>\n                    <td class=\"link\"><a href=\"${g.url}\" title=\"View on geocaching.com\"><span class=\"glyphicon glyphicon-new-window\"></span></a></td>\n                </tr>`);\n    });\n    \n    $(\"#totalGeocaches\").html(\"(\" + geocachesRetrieved.length + \")\");\n    $(\"#table-caches tbody\").show();\n  };\n\n  $(\"#select-all\").click(function () {\n    $(\".unpublished-geocache\").prop(\"checked\", $(this).is(\":checked\"));\n  });\n\n  $(\"#table-caches tbody\").on(\"click\", \"input[type=checkbox]\", function () {\n    if ($(\"#chk_select\").prop(\"checked\") && $(this).prop(\"checked\")) {\n      var countFrom = parseInt($(this).parents(\"tr\").data(\"counter\"), 10);\n\n      var countTo = parseInt($(\"#block_select input[type=range]\").val(), 10) - 1;\n      $(\"#table-caches tbody tr:nth-child(n+\" + (countFrom + 1) + \"):nth-child(-n+\" + (countFrom + countTo) + \") input[type=checkbox]\").prop(\"checked\", true);\n    }\n  });\n\n  $(\"#chk_split\").change(function () {\n    $(\"#block_split input[type=range]\").prop(\"disabled\", !$(this).prop(\"checked\"));\n  });\n\n  $(\"#block_split input[type=range]\").change(function () {\n    $(\"label[for=chk_split]\").html(\"Split GPX files by \" + $(this).val() + \" geocaches\");\n  });\n\n  $(\"#chk_select\").change(function () {\n    $(\"#block_select input[type=range]\").prop(\"disabled\", !$(this).prop(\"checked\"));\n  });\n\n  $(\"#block_select input[type=range]\").change(function () {\n    $(\"label[for=chk_select]\").html(\"Pick \" + $(this).val() + \" geocaches\");\n  });\n\n  $(\"#create-gpx\").click(function () {\n    let geocodes = [];\n\n    let create = $(this);\n\n    $(\"input[name=cache]:checked\").each(function () {\n      geocodes.push(this.value);\n    });\n\n    if (geocodes.length <= 0) {\n      alert(\"You must choose at least one cache.\");\n      return false;\n    }\n\n    $(\"#download-links\").html(\"\");\n    $(\"#table-caches tbody tr\").removeClass(\"success\");\n    $(\"#table-caches tbody tr\").removeClass(\"danger\");\n    $(\"#table-caches .status\").html(\"\");\n\n    create.button(\"loading\");\n\n    let gpxSplit = $(\"#chk_split\").prop(\"checked\") ? +$(\"#block_split input[type=range]\").val() : 0;\n\n    $.ajax({\n      url: \"geocaches.php\",\n      type: \"POST\",\n      data: {\n        \"geocodes\": geocodes,\n        \"gpxSplit\": gpxSplit\n      }\n    }).done(function (data) {\n      if (data && data.success) {\n        // console.log(data.fail);\n        $(\"#download-links\").append(data.link);\n      } else {\n        alert(data.message);\n        // console.error(data.message);\n      }\n    }).fail(function (jqXHR, textStatus) {\n      alert(textStatus);\n      // console.error(textStatus);\n    }).always(function () {\n      create.button(\"reset\");\n    });\n  });\n\n  $().ready(function() {\n    if (user) {\n      $(\"#fetching-unpublished-caches\").show(0, fetchUnpublishedGeocaches);\n    }\n  });\n\n}($));\n","/* jshint ignore:start */\n(function() {\n  var WebSocket = window.WebSocket || window.MozWebSocket;\n  var br = window.brunch = (window.brunch || {});\n  var ar = br['auto-reload'] = (br['auto-reload'] || {});\n  if (!WebSocket || ar.disabled) return;\n  if (window._ar) return;\n  window._ar = true;\n\n  var cacheBuster = function(url){\n    var date = Math.round(Date.now() / 1000).toString();\n    url = url.replace(/(\\&|\\\\?)cacheBuster=\\d*/, '');\n    return url + (url.indexOf('?') >= 0 ? '&' : '?') +'cacheBuster=' + date;\n  };\n\n  var browser = navigator.userAgent.toLowerCase();\n  var forceRepaint = ar.forceRepaint || browser.indexOf('chrome') > -1;\n\n  var reloaders = {\n    page: function(){\n      window.location.reload(true);\n    },\n\n    stylesheet: function(){\n      [].slice\n        .call(document.querySelectorAll('link[rel=stylesheet]'))\n        .filter(function(link) {\n          var val = link.getAttribute('data-autoreload');\n          return link.href && val != 'false';\n        })\n        .forEach(function(link) {\n          link.href = cacheBuster(link.href);\n        });\n\n      // Hack to force page repaint after 25ms.\n      if (forceRepaint) setTimeout(function() { document.body.offsetHeight; }, 25);\n    },\n\n    javascript: function(){\n      var scripts = [].slice.call(document.querySelectorAll('script'));\n      var textScripts = scripts.map(function(script) { return script.text }).filter(function(text) { return text.length > 0 });\n      var srcScripts = scripts.filter(function(script) { return script.src });\n\n      var loaded = 0;\n      var all = srcScripts.length;\n      var onLoad = function() {\n        loaded = loaded + 1;\n        if (loaded === all) {\n          textScripts.forEach(function(script) { eval(script); });\n        }\n      }\n\n      srcScripts\n        .forEach(function(script) {\n          var src = script.src;\n          script.remove();\n          var newScript = document.createElement('script');\n          newScript.src = cacheBuster(src);\n          newScript.async = true;\n          newScript.onload = onLoad;\n          document.head.appendChild(newScript);\n        });\n    }\n  };\n  var port = ar.port || 9485;\n  var host = br.server || window.location.hostname || 'localhost';\n\n  var connect = function(){\n    var connection = new WebSocket('ws://' + host + ':' + port);\n    connection.onmessage = function(event){\n      if (ar.disabled) return;\n      var message = event.data;\n      var reloader = reloaders[message] || reloaders.page;\n      reloader();\n    };\n    connection.onerror = function(){\n      if (connection.readyState) connection.close();\n    };\n    connection.onclose = function(){\n      window.setTimeout(connect, 1000);\n    };\n  };\n  connect();\n})();\n/* jshint ignore:end */\n"]}