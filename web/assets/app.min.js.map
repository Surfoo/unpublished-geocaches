{"version":3,"sources":["app/app.js","node_modules/auto-reload-brunch/vendor/auto-reload.js"],"names":["$","geocachesRetrieved","fetchUnpublishedGeocaches","button","fetch","mode","credentials","then","json","filterData","displayGeocaches","catch","err","text","console","error","errorMessage","click","document","getElementById","value","method","headers","body","JSON","stringify","alert","statusText","response","ok","status","window","location","replace","href","data","each","geocaches","index","g","Object","keys","find","key","referenceCode","undefined","push","prop","hide","show","html","forEach","append","geocacheType","imageUrl","name","url","length","is","on","countFrom","parseInt","parents","countTo","val","change","geocodes","create","removeClass","gpxSplit","ajax","type","done","success","link","message","fail","jqXHR","textStatus","always","ready","user","WebSocket","MozWebSocket","br","brunch","ar","disabled","_ar","cacheBuster","date","Math","round","Date","now","toString","indexOf","browser","navigator","userAgent","toLowerCase","forceRepaint","reloaders","page","reload","stylesheet","slice","call","querySelectorAll","filter","getAttribute","setTimeout","offsetHeight","javascript","scripts","textScripts","map","script","srcScripts","src","loaded","all","onLoad","eval","remove","newScript","createElement","async","onload","head","appendChild","port","host","server","hostname","connect","connection","onmessage","event","reloader","onerror","readyState","close","onclose"],"mappings":"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","file":"web/assets/app.min.js","sourcesContent":["(function ($) {\n  \"use strict\";\n\n  let geocachesRetrieved = [];\n\n  let fetchUnpublishedGeocaches = function () {\n    $(\"#create-gpx\").button(\"reset\");\n\n    fetch(\"unpublished.php\", {\n      mode: \"same-origin\",\n      credentials: \"same-origin\"\n    })\n      .then(json)\n      .then(filterData)\n      .then(displayGeocaches)\n      .catch(err => {\n        err.text().then(errorMessage => {\n          console.error(errorMessage);\n        });\n      });\n  };\n\n  $(\"#search-geocodes\").click(function () {\n    if (document.getElementById(\"geocodes\").value === \"\") {\n      return false;\n    }\n\n    fetch(\"unpublished.php\", {\n      method: \"POST\",\n      mode: \"same-origin\",\n      credentials: \"same-origin\",\n      headers: {\n        \"Content-Type\": \"application/json\"\n      },\n      body: JSON.stringify({\n        \"geocodes\": document.getElementById(\"geocodes\").value\n      })\n    })\n      .then(json)\n      .then(filterData)\n      .then(displayGeocaches)\n      .catch(err => {\n        err.text()\n          .then(errorMessage => {\n            alert(err.statusText);\n          });\n      });\n\n  });\n\n  let json = function (response) {\n    if (!response.ok) {\n      if (response.status === 401) {\n        window.location.replace(window.location.href + \"?logout\");\n      }\n      throw response;\n    }\n    return response.json();\n  };\n\n  let filterData = function (data) {\n    $.each(data.geocaches, function (index, g) {\n      if (Object.keys(geocachesRetrieved).find(key => geocachesRetrieved[key].referenceCode === g.referenceCode) === undefined) {\n        geocachesRetrieved.push(g);\n      }\n    });\n  };\n\n  let displayGeocaches = function () {\n    $(\"#select-all\").prop(\"checked\", false);\n    $(\"#fetching-unpublished-caches\").hide();\n    $(\"#table-unpublished-caches\").show();\n    $(\"#table-caches tbody\").html(\"\");\n\n    geocachesRetrieved.forEach(function (g, index) {\n      $(\"#table-caches tbody\")\n        .append(`\n            <tr class=\"${g.referenceCode}\" data-counter=\" ${index + 1}\" title=\"Add this geocache to the GPX\">\n                    <td style=\"text-align: center;\"><input type=\"checkbox\" name=\"cache\" class=\"unpublished-geocache\" value=\"${g.referenceCode}\" id=\"${g.referenceCode}\" /></td>\n                    <td>#${index + 1}</td>\n                    <td>${g.referenceCode}</td>\n                    <td><label for=\"${g.referenceCode}\"><img src=\"${g.geocacheType.imageUrl}\" alt=\"${g.geocacheType.name}\" width=\"24\" /> ${g.name}</label></td>\n                    <td class=\"link\"><a href=\"${g.url}\" title=\"View on geocaching.com\"><span class=\"glyphicon glyphicon-new-window\"></span></a></td>\n                </tr>`);\n    });\n\n    $(\"#totalGeocaches\").html(\"(\" + geocachesRetrieved.length + \")\");\n    $(\"#table-caches tbody\").show();\n  };\n\n  $(\"#select-all\").click(function () {\n    $(\".unpublished-geocache\").prop(\"checked\", $(this).is(\":checked\"));\n  });\n\n  $(\"#table-caches tbody\").on(\"click\", \"input[type=checkbox]\", function () {\n    if ($(\"#chk_select\").prop(\"checked\") && $(this).prop(\"checked\")) {\n      var countFrom = parseInt($(this).parents(\"tr\").data(\"counter\"), 10);\n\n      var countTo = parseInt($(\"#block_select input[type=range]\").val(), 10) - 1;\n      $(\"#table-caches tbody tr:nth-child(n+\" + (countFrom + 1) + \"):nth-child(-n+\" + (countFrom + countTo) + \") input[type=checkbox]\").prop(\"checked\", true);\n    }\n  });\n\n  $(\"#chk_split\").change(function () {\n    $(\"#block_split input[type=range]\").prop(\"disabled\", !$(this).prop(\"checked\"));\n  });\n\n  $(\"#block_split input[type=range]\").change(function () {\n    $(\"label[for=chk_split]\").html(\"Split GPX files by \" + $(this).val() + \" geocaches\");\n  });\n\n  $(\"#chk_select\").change(function () {\n    $(\"#block_select input[type=range]\").prop(\"disabled\", !$(this).prop(\"checked\"));\n  });\n\n  $(\"#block_select input[type=range]\").change(function () {\n    $(\"label[for=chk_select]\").html(\"Pick \" + $(this).val() + \" geocaches\");\n  });\n\n  $(\"#create-gpx\").click(function () {\n    let geocodes = [];\n\n    let create = $(this);\n\n    $(\"input[name=cache]:checked\").each(function () {\n      geocodes.push(this.value);\n    });\n\n    if (geocodes.length <= 0) {\n      alert(\"You must choose at least one cache.\");\n      return false;\n    }\n\n    $(\"#download-links\").html(\"\");\n    $(\"#table-caches tbody tr\").removeClass(\"success\");\n    $(\"#table-caches tbody tr\").removeClass(\"danger\");\n    $(\"#table-caches .status\").html(\"\");\n\n    create.button(\"loading\");\n\n    let gpxSplit = $(\"#chk_split\").prop(\"checked\") ? +$(\"#block_split input[type=range]\").val() : 0;\n\n    $.ajax({\n      url: \"geocaches.php\",\n      type: \"POST\",\n      data: {\n        \"geocodes\": geocodes,\n        \"gpxSplit\": gpxSplit\n      }\n    }).done(function (data) {\n      if (data && data.success) {\n        // console.log(data.fail);\n        $(\"#download-links\").append(data.link);\n      } else {\n        alert(data.message);\n        // console.error(data.message);\n      }\n    }).fail(function (jqXHR, textStatus) {\n      alert(textStatus);\n      // console.error(textStatus);\n    }).always(function () {\n      create.button(\"reset\");\n    });\n  });\n\n  $().ready(function () {\n    if (user) {\n      $(\"#fetching-unpublished-caches\").show(0, fetchUnpublishedGeocaches);\n    }\n  });\n\n}($));\n","/* jshint ignore:start */\n(function() {\n  var WebSocket = window.WebSocket || window.MozWebSocket;\n  var br = window.brunch = (window.brunch || {});\n  var ar = br['auto-reload'] = (br['auto-reload'] || {});\n  if (!WebSocket || ar.disabled) return;\n  if (window._ar) return;\n  window._ar = true;\n\n  var cacheBuster = function(url){\n    var date = Math.round(Date.now() / 1000).toString();\n    url = url.replace(/(\\&|\\\\?)cacheBuster=\\d*/, '');\n    return url + (url.indexOf('?') >= 0 ? '&' : '?') +'cacheBuster=' + date;\n  };\n\n  var browser = navigator.userAgent.toLowerCase();\n  var forceRepaint = ar.forceRepaint || browser.indexOf('chrome') > -1;\n\n  var reloaders = {\n    page: function(){\n      window.location.reload(true);\n    },\n\n    stylesheet: function(){\n      [].slice\n        .call(document.querySelectorAll('link[rel=stylesheet]'))\n        .filter(function(link) {\n          var val = link.getAttribute('data-autoreload');\n          return link.href && val != 'false';\n        })\n        .forEach(function(link) {\n          link.href = cacheBuster(link.href);\n        });\n\n      // Hack to force page repaint after 25ms.\n      if (forceRepaint) setTimeout(function() { document.body.offsetHeight; }, 25);\n    },\n\n    javascript: function(){\n      var scripts = [].slice.call(document.querySelectorAll('script'));\n      var textScripts = scripts.map(function(script) { return script.text }).filter(function(text) { return text.length > 0 });\n      var srcScripts = scripts.filter(function(script) { return script.src });\n\n      var loaded = 0;\n      var all = srcScripts.length;\n      var onLoad = function() {\n        loaded = loaded + 1;\n        if (loaded === all) {\n          textScripts.forEach(function(script) { eval(script); });\n        }\n      }\n\n      srcScripts\n        .forEach(function(script) {\n          var src = script.src;\n          script.remove();\n          var newScript = document.createElement('script');\n          newScript.src = cacheBuster(src);\n          newScript.async = true;\n          newScript.onload = onLoad;\n          document.head.appendChild(newScript);\n        });\n    }\n  };\n  var port = ar.port || 9485;\n  var host = br.server || window.location.hostname || 'localhost';\n\n  var connect = function(){\n    var connection = new WebSocket('ws://' + host + ':' + port);\n    connection.onmessage = function(event){\n      if (ar.disabled) return;\n      var message = event.data;\n      var reloader = reloaders[message] || reloaders.page;\n      reloader();\n    };\n    connection.onerror = function(){\n      if (connection.readyState) connection.close();\n    };\n    connection.onclose = function(){\n      window.setTimeout(connect, 1000);\n    };\n  };\n  connect();\n})();\n/* jshint ignore:end */\n"]}