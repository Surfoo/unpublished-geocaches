!function(){"use strict";var e="undefined"==typeof global?self:global;if("function"!=typeof e.require){var t={},n={},c={},o={}.hasOwnProperty,r=/^\.\.?(\/|$)/,i=function(e,t){for(var n,c=[],o=(r.test(t)?e+"/"+t:t).split("/"),i=0,a=o.length;i<a;i++)n=o[i],".."===n?c.pop():"."!==n&&""!==n&&c.push(n);return c.join("/")},a=function(e){return e.split("/").slice(0,-1).join("/")},l=function(t){return function(n){var c=i(a(t),n);return e.require(c,t)}},s=function(e,t){var c=b&&b.createHot(e),o={id:e,exports:{},hot:c};return n[e]=o,t(o.exports,l(e),o),o.exports},h=function(e){return c[e]?h(c[e]):e},u=function(e,t){return h(i(a(e),t))},p=function(e,c){null==c&&(c="/");var r=h(e);if(o.call(n,r))return n[r].exports;if(o.call(t,r))return s(r,t[r]);throw new Error("Cannot find module '"+e+"' from '"+c+"'")};p.alias=function(e,t){c[t]=e};var d=/\.[^.\/]+$/,f=/\/index(\.[^\/]+)?$/,g=function(e){if(d.test(e)){var t=e.replace(d,"");o.call(c,t)&&c[t].replace(d,"")!==t+"/index"||(c[t]=e)}if(f.test(e)){var n=e.replace(f,"");o.call(c,n)||(c[n]=e)}};p.register=p.define=function(e,c){if(e&&"object"==typeof e)for(var r in e)o.call(e,r)&&p.register(r,e[r]);else t[e]=c,delete n[e],g(e)},p.list=function(){var e=[];for(var n in t)o.call(t,n)&&e.push(n);return e};var b=e._hmr&&new e._hmr(u,p,t,n);p._cache=n,p.hmr=b&&b.wrap,p.brunch=!0,e.require=p}}(),function(){"undefined"==typeof window?this:window;require.register("app.js",function(e,t,n){"use strict";!function(e){var t=[],n=function(){e("#create-gpx").button("reset"),fetch("unpublished.php",{mode:"same-origin",credentials:"same-origin"}).then(c).then(o).then(r)["catch"](function(e){e.text().then(function(e){console.error(e)})})};e("#search-geocodes").click(function(){return""!==document.getElementById("geocodes").value&&void fetch("unpublished.php",{method:"POST",mode:"same-origin",credentials:"same-origin",headers:{"Content-Type":"application/json"},body:JSON.stringify({geocodes:document.getElementById("geocodes").value})}).then(c).then(o).then(r)["catch"](function(e){e.text().then(function(t){console.error(t),alert(e.statusText)})})});var c=function(e){if(!e.ok)throw 401===e.status&&window.location.replace(window.location.href+"?logout"),e;return e.json()},o=function(n){e.each(n.geocaches,function(e,n){void 0===Object.keys(t).find(function(e){return t[e].referenceCode===n.referenceCode})&&t.push(n)})},r=function(){e("#select-all").prop("checked",!1),e("#fetching-unpublished-caches").hide(),e("#table-unpublished-caches").show(),e("#table-caches tbody").html(""),t.forEach(function(t,n){e("#table-caches tbody").append('\n            <tr class="'+t.referenceCode+'" data-counter=" '+(n+1)+'" title="Add this geocache to the GPX">\n                    <td style="text-align: center;"><input type="checkbox" name="cache" class="unpublished-geocache" value="'+t.referenceCode+'" id="'+t.referenceCode+'" /></td>\n                    <td>#'+(n+1)+"</td>\n                    <td>"+t.referenceCode+'</td>\n                    <td><label for="'+t.referenceCode+'"><img src="'+t.geocacheType.imageUrl+'" alt="'+t.geocacheType.name+'" width="24" /> '+t.name+'</label></td>\n                    <td class="link"><a href="'+t.url+'" title="View on geocaching.com"><span class="glyphicon glyphicon-new-window"></span></a></td>\n                </tr>')}),e("#totalGeocaches").html("("+t.length+")"),e("#table-caches tbody").show()};e("#select-all").click(function(){e(".unpublished-geocache").prop("checked",e(this).is(":checked"))}),e("#table-caches tbody").on("click","input[type=checkbox]",function(){if(e("#chk_select").prop("checked")&&e(this).prop("checked")){var t=parseInt(e(this).parents("tr").data("counter"),10),n=parseInt(e("#block_select input[type=range]").val(),10)-1;e("#table-caches tbody tr:nth-child(n+"+(t+1)+"):nth-child(-n+"+(t+n)+") input[type=checkbox]").prop("checked",!0)}}),e("#chk_split").change(function(){e("#block_split input[type=range]").prop("disabled",!e(this).prop("checked"))}),e("#block_split input[type=range]").change(function(){e("label[for=chk_split]").html("Split GPX files by "+e(this).val()+" geocaches")}),e("#chk_select").change(function(){e("#block_select input[type=range]").prop("disabled",!e(this).prop("checked"))}),e("#block_select input[type=range]").change(function(){e("label[for=chk_select]").html("Pick "+e(this).val()+" geocaches")}),e("#create-gpx").click(function(){var t=[],n=e(this);if(e("input[name=cache]:checked").each(function(){t.push(this.value)}),t.length<=0)return alert("You must choose at least one cache."),!1;e("#download-links").html(""),e("#table-caches tbody tr").removeClass("success"),e("#table-caches tbody tr").removeClass("danger"),e("#table-caches .status").html(""),n.button("loading");var c=e("#chk_split").prop("checked")?+e("#block_split input[type=range]").val():0;e.ajax({url:"geocaches.php",type:"POST",data:{geocodes:t,gpxSplit:c}}).done(function(t){t&&t.success?e("#download-links").append(t.link):alert(t.message)}).fail(function(e,t){alert(t)}).always(function(){n.button("reset")})}),e().ready(function(){user&&e("#fetching-unpublished-caches").show(0,n)})}($)}),require.register("___globals___",function(e,t,n){})}(),require("___globals___");